<!-- Updated version 2.0 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Almaty Tourist App</title>

  <link rel="manifest" href="manifest.json">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 16px;
      color: #222;
    }
    h1 {
      text-align: center;
      color: #ff9800;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    button {
      width: 100%;
      padding: 14px;
      margin-top: 8px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #ff9800;
      color: #fff;
      cursor: pointer;
    }
    button.secondary {
      background: #1976d2;
    }
    button.green {
      background: #25d366;
    }
    button.telegram {
      background: #0088cc;
    }
    select {
      width: 100%;
      padding: 10px;
      margin-top: 8px;
      font-size: 16px;
    }
    .small {
      font-size: 14px;
      color: #555;
      text-align: center;
    }
  </style>
</head>

<body>

<h1>Almaty Tourist</h1>
<p class="small">Airport Quick Assistant â€“ EN / RU / FA</p>

<div class="card">
  <h3>ğŸ—º Transport & Stay</h3>
  <button id="btnHotel">Nearest Hotel / Hostel</button>
  <button id="btnLocation" class="secondary">Show My Location</button>
</div>

<div class="card">
  <h3>ğŸ’³ Payment & Support</h3>
  <button id="btnPay" class="green">Pay Taxi / Bus (min 10000 â‚¸)</button>
  <button id="btnWhatsApp" class="green">WhatsApp Support</button>
  <button id="btnTelegram" class="telegram">Telegram Support</button>
</div>

<div class="card">
  <h3>ğŸŒ Quick Translation (Offline)</h3>
  <select id="phraseSelect">
    <option value="">Select a phrase</option>
    <option value="taxi">I need a taxi</option>
    <option value="hotel">Take me to the nearest hotel</option>
    <option value="bus">Where is the bus stop?</option>
    <option value="price">How much is the fare?</option>
  </select>
  <p id="translationResult" class="small"></p>
</div>

<div class="card">
  <button id="btnInstall">Install App</button>
</div>

<p class="small">AlmatyTourist.App â€“ MVP</p>

<script>
let deferredPrompt = null;

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
});

document.getElementById("btnInstall").addEventListener("click", async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    deferredPrompt = null;
  } else {
    alert("App already installed or not supported.");
  }
});

document.getElementById("btnHotel").addEventListener("click", () => {
  window.open(
    "https://yandex.com/maps/?text=hotel%20near%20Almaty%20Airport",
    "_blank"
  );
});

document.getElementById("btnLocation").addEventListener("click", () => {
  if (!navigator.geolocation) {
    alert("GPS not supported");
    return;
  }
  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      window.open(
        `https://yandex.com/maps/?ll=${lon},${lat}&z=15`,
        "_blank"
      );
    },
    () => alert("Location permission denied")
  );
});

document.getElementById("btnPay").addEventListener("click", () => {
  window.open(
    "https://wa.me/77778444254?text=I%20need%20help%20to%20pay%20taxi%20or%20bus",
    "_blank"
  );
});

document.getElementById("btnWhatsApp").addEventListener("click", () => {
  window.open("https://wa.me/77778444254", "_blank");
});

document.getElementById("btnTelegram").addEventListener("click", () => {
  window.open("https://t.me/mdankz", "_blank");
});

const phrases = {
  taxi: {
    en: "I need a taxi",
    ru: "ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ‚Ğ°ĞºÑĞ¸",
    fa: "Ù…Ù† ØªØ§Ú©Ø³ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù…"
  },
  hotel: {
    en: "Take me to the nearest hotel",
    ru: "ĞÑ‚Ğ²ĞµĞ·Ğ¸Ñ‚Ğµ Ğ¼ĞµĞ½Ñ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğ¹ Ğ¾Ñ‚ĞµĞ»ÑŒ",
    fa: "Ù…Ø±Ø§ Ø¨Ù‡ Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ù‡ØªÙ„ Ø¨Ø¨Ø±ÛŒØ¯"
  },
  bus: {
    en: "Where is the bus stop?",
    ru: "Ğ“Ğ´Ğµ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ±ÑƒÑĞ½Ğ°Ñ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°?",
    fa: "Ø§ÛŒØ³ØªÚ¯Ø§Ù‡ Ø§ØªÙˆØ¨ÙˆØ³ Ú©Ø¬Ø§Ø³ØªØŸ"
  },
  price: {
    en: "How much is the fare?",
    ru: "Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞ·Ğ´?",
    fa: "Ú©Ø±Ø§ÛŒÙ‡ Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ"
  }
};

document.getElementById("phraseSelect").addEventListener("change", function () {
  const val = this.value;
  if (!val) {
    document.getElementById("translationResult").innerText = "";
    return;
  }
  const p = phrases[val];
  document.getElementById("translationResult").innerText =
    `EN: ${p.en}\nRU: ${p.ru}\nFA: ${p.fa}`;
});

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>